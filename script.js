// Дані слів за тематиками
const wordDatabase = {
    movies: [
        "Втеча з Шоушенка",
        "Хрещений батько",
        "Хрещений батько 2",
        "Хрещений батько 3",
        "Темний лицар",
        "Повернення темного лицаря",
        "Початок",
        "Інтерстеллар",
        "Матриця",
        "Матриця: Перезавантаження",
        "Матриця: Революції",
        "Бійцівський клуб",
        "Форрест Ґамп",
        "Зелена миля",
        "Список Шиндлера",
        "Сім",
        "Гладіатор",
        "Титанік",
        "Врятувати рядового Раяна",
        "Щелепи",
        "Індіана Джонс: У пошуках втраченого ковчега",
        "Індіана Джонс і храм долі",
        "Індіана Джонс і останній хрестовий похід",
        "Зоряні війни: Нова надія",
        "Імперія завдає удару у відповідь",
        "Повернення джедая",
        "Пробудження сили",
        "Останні джедаї",
        "Скайвокер. Сходження",
        "Назад у майбутнє",
        "Назад у майбутнє 2",
        "Назад у майбутнє 3",
        "Термінатор",
        "Термінатор 2: Судний день",
        "Чужий",
        "Чужі",
        "Хижак",
        "Роккі",
        "Роккі 2",
        "Роккі 3",
        "Роккі 4",
        "Роккі Бальбоа",
        "Крід",
        "Крід 2",
        "Крід 3",
        "Мовчання ягнят",
        "Ганнібал",
        "Червоний дракон",
        "Великий Лебовскі",
        "Вовк з Волл-стріт",
        "Острів проклятих",
        "Відступники",
        "Таксист",
        "Божевільний Макс: Дорога люті",
        "Апокаліпсис сьогодні",
        "Звичайні підозрювані",
        "Паразити",
        "Старим тут не місце",
        "Людина-павук: Навколо всесвіту",
        "Людина-павук: Крізь всесвіт",
        "Месники",
        "Месники: Ера Альтрона",
        "Месники: Війна нескінченності",
        "Месники: Завершення",
        "Капітан Америка: Зимовий солдат",
        "Капітан Америка: Громадянська війна",
        "Залізна людина",
        "Залізна людина 2",
        "Залізна людина 3",
        "Чорна пантера",
        "Чорна пантера: Ваканда назавжди",
        "Тор",
        "Тор: Раґнарок",
        "Вартові Галактики",
        "Вартові Галактики 2",
        "Вартові Галактики 3",
        "Доктор Стрендж",
        "Доктор Стрендж у мультивсесвіті божевілля",
        "Джокер",
        "Бетмен (2022)",
        "Бетмен: Початок",
        "Дюнкерк",
        "Оппенгеймер",
        "Гаррі Поттер і філософський камінь",
        "Гаррі Поттер і таємна кімната",
        "Гаррі Поттер і в'язень Азкабану",
        "Гаррі Поттер і келих вогню",
        "Гаррі Поттер і Орден Фенікса",
        "Гаррі Поттер і Напівкровний Принц",
        "Гаррі Поттер і Смертельні реліквії: Частина 1",
        "Гаррі Поттер і Смертельні реліквії: Частина 2",
        "Фантастичні звірі і де їх шукати",
        "Фантастичні звірі: Злочини Ґрін-де-Вальда",
        "Фантастичні звірі: Таємниці Дамблдора",
        "Гобіт: Несподівана подорож",
        "Гобіт: Пустка Смога",
        "Гобіт: Битва п'яти воїнств",
        "Хоробре серце",
        "Добрий, поганий, злий",
        "Один вдома",
        "Один вдома 2: Загублений у Нью-Йорку",
        "Шосте відчуття",
        "Вічне сяйво чистого розуму",
        "Американська історія Ікс",
        "Амелі",
        "Леон-кілер",
        "Піаніст",
        "Життя прекрасне",
        "Ізгой",
        "Нафта",
        "Гран Торино",
        "Три білборди за межами Еббінґа, Міссурі",
        "Король говорить!",
        "Форма води",
        "Історія іграшок",
        "Історія іграшок 3",
        "У пошуках Немо",
        "У пошуках Дорі",
        "Вгору",
        "Душа",
        "Коко",
        "Рататуй",
        "ВОЛЛ·І",
        "Суперсімейка",
        "Холодне серце",
        "Холодне серце 2",
        "Відважна",
        "Зоотрополіс",
        "Король Лев",
        "Аладдін",
        "Красуня і Чудовисько",
        "Мулан",
        "Шрек",
        "Шрек 2",
        "Кунг-фу Панда",
        "Кунг-фу Панда 2",
        "Як приручити дракона",
        "Як приручити дракона 2",
        "Принцеса Мононоке",
        "Мандрівний замок Хаула",
        "Віднесені привидами",
        "Могила світлячків",
        "Твоє ім'я",
        "Гра престолів",
        "Пуститися берега",
        "Краще телефонуйте Солу",
        "Друзі",
        "Теорія великого вибуху",
        "Офіс (США)",
        "Шерлок",
        "Доктор Хаус",
        "Справжній детектив",
        "Корона",
        "Дивні дива",
        "Чорне дзеркало",
        "Мандалорець",
        "Андор",
        "Останній з нас",
        "Ведмідь",
        "Гра в кальмара",
        "Паперовий будинок",
        "Нарко",
        "Фарґо",
        "Втеча з в'язниці",
        "Загублені",
        "Декстер",
        "Клан Сопрано",
        "Твін Пікс",
        "Відьмак",
        "Доктор Хто",
        "Зоряний шлях: Дискавері",
        "Зоряний шлях: Наступне покоління",
        "Кобра Кай",
        "Тед Лассо",
        "Емілі в Парижі",
        "Бріджертони",
        "Підпільна імперія",
        "Сини анархії",
        "Вікінги",
        "Вікінги: Вальгалла",
        "Пірати Карибського моря: Прокляття Чорної Перлини",
        "Пірати Карибського моря: Скриня мерця",
        "Пірати Карибського моря: На краю світу",
        "Пірати Карибського моря: На дивних берегах",
        "Пірати Карибського моря: Помста Салазара",
        "Аватар",
        "Аватар: Шлях води",
        "Джон Вік",
        "Джон Вік 2",
        "Джон Вік 3",
        "Джон Вік 4",
        "Місія нездійсненна",
        "Місія нездійсненна 2",
        "Місія нездійсненна 3",
        "Місія нездійсненна: Протокол Фантом",
        "Місія нездійсненна: Нація ізгоїв",
        "Місія нездійсненна: Фолаут",
        "Місія нездійсненна: Розплата. Частина перша",
        "Джанґо вільний",
        "Безславні виродки",
        "Вбити Білла",
        "Вбити Білла 2",
        "Бульвар Сансет",
        "Міст через річку Квай",
        "12 розгніваних чоловіків",
        "Психо",
        "Запаморочення",
        "Птахи",
        "2001: Космічна одіссея",
        "Механічний апельсин",
        "Сяйво",
        "Віднесені вітром",
        "Співаючи під дощем",
        "Римські канікули",
        "Амадей",
        "Апокаліпто",
        "Меланхолія",
        "Драйв",
        "Скайфолл",
        "Казино Рояль",
        "Не час помирати",
        "Ґолдфінґер",
        "Із Росії з любов'ю",
        "Живеш тільки двічі",
        "Лоґан",
        "Люди Ікс: Дні минулого майбутнього",
        "Дедпул",
        "Дедпул 2",
        "Темний фенікс",
        "Пташиний короб",
        "Тіні забутих предків",
        "Захар Беркут",
        "Кіборги",
        "Наші котики",
        "Поводир",
        "Мої думки тихі",
        "Атлантида",
        "Додому",
        "Земля блакитна, ніби апельсин",
        "Черкаси",
        "Памфір",
        "Віддана",
        "Люксембург, Люксембург",
        "Іловайськ 2014. Батальйон Донбас",
        "Крути 1918",
        "Заборонений",
        "Снайпер. Білий ворон",
        "Слуга народу",
        "Пес",
        "І будуть люди",
        "Спіймати Кайдаша",
        "Кава з кардамоном",
        "Село на мільйон",
        "Століття Якова",
        "Кріпосна",
        "Школа (2018)",
        "Гвардія",
        "Козаки. Футбол",
        "Козаки. Навколо світу",
        "Дракула (BBC)",
        "Чорнобиль",
        "Венздей",
        "Хід королеви",
        "Американська красуня",
        "Міст шпигунів",
        "Соціальна мережа",
        "1+1",
        "Ґранд Будапешт Готель",
        "Три ідіоти",
        "Життя Пі",
        "Загін самогубців",
        "Диво-Жінка",
        "Капітан Марвел",
        "Ла-Ла Ленд",
        "Місячне сяйво",
        "Ребекка",
        "Богемна рапсодія",
        "Людина, яка змінила все",
        "Король Лір (BBC)",
        "Піратська радіостанція",
        "На голці",
        "Дванадцять років рабства",
        "Хлопчик у смугастій піжамі",
        "Петля часу",
        "Козирні тузи",
        "Ефект метелика",
        "Соулмен",
        "Молодість",
        "Готель Руанда",
        "Земля кочівників",
        "Міст до Террабітії",
        "Відступники",
        "Початок знову",
        "Крамер проти Крамера",
        "Список контактів",
        "Одержимість",
        "Поляна сновидінь",
        "Чарівник країни Оз",
        "Зелена книга",
        "Мовчання",
        "Опівнічний експрес",
        "Дюн",
        "Видалений запис",
        "Секрети Лос-Анджелеса",
        "Ель Каміно: Фільм По дорозі",
        "Полонянка",
        "Ірландець",
        "Гра Імітації",
        "Виживший",
        "Ревенант",
        "Манчестер біля моря",
        "Бабадук",
        "Воно",
        "Жах Амітивілля",
        "Сяйво доктора Сліпа",
        "Кольори рук",
        "Ножі наголо",
        "Скляний замок",
        "Пікселі",
        "Прибуття",
        "Едвард Руки-ножиці",
        "Великий Ґетсбі",
        "Список смерті",
        "Бійня номер 5",
        "Гравітація",
        "Марсіанин",
        "Веном",
        "Веном 2",
        "Морбіус",
        "Шалений Макс 2",
        "Синя планета (BBC)",
        "Планета Земля (BBC)",
        "Наш планета",
        "Блакитна планета 2",
        "Космос: Простір і час",
        "Космічна Одисея 2010"
    ],
    history: [
        "Трипільська культура",
        "Кіммерійці",
        "Скіфи",
        "Сармати",
        "Анти",
        "Таври",
        "Ольвія",
        "Херсонес Таврійський",
        "Пантікапей",
        "Тіра",
        "Боспорське царство",
        "Хозарський каганат",
        "Шлях із варяг у греки",
        "Київ",
        "Аскольд і Дір",
        "Олег Віщий",
        "Щит на воротах Царгорода",
        "Договори Русі з Візантією",
        "Княгиня Ольга",
        "Святослав Хоробрий",
        "Доростол",
        "Київська Русь",
        "Володимир Великий",
        "Хрещення Русі 988",
        "Десятинна церква",
        "Ярослав Мудрий",
        "Софія Київська",
        "Золоті ворота",
        "Руська правда",
        "Нестор Літописець",
        "Повість минулих літ",
        "Володимир Мономах",
        "Любецький з’їзд 1097",
        "Удільні князівства",
        "Чернігівське князівство",
        "Переяславське князівство",
        "Галицьке князівство",
        "Волинське князівство",
        "Роман Мстиславич",
        "Данило Галицький",
        "Коронація в Дорогочині",
        "Галицько-Волинське князівство",
        "Заснування Львова 1256",
        "Холмська столиця",
        "Битва на Калці 1223",
        "Монголо-татарська навала",
        "Батий",
        "Золота Орда",
        "Битва на Синіх Водах 1362",
        "Велике князівство Литовське",
        "Ольгерд",
        "Кревська унія 1385",
        "Вітовт",
        "Грюнвальдська битва 1410",
        "Городельська унія 1413",
        "Люблінська унія 1569",
        "Річ Посполита",
        "Магдебурзьке право",
        "Братства",
        "Острозька академія 1576",
        "Острозька Біблія 1581",
        "Іван Федоров",
        "Києво-Могилянська академія",
        "Петро Могила",
        "Козацтво",
        "Запорізька Січ",
        "Дніпрові пороги",
        "Дмитро Вишневецький",
        "Острів Хортиця",
        "Морські походи козаків",
        "Хотинська битва 1621",
        "Петро Конашевич-Сагайдачний",
        "Реєстрові козаки",
        "Богдан Хмельницький",
        "Жовтоводська битва 1648",
        "Корсунська битва 1648",
        "Пилявецька битва 1648",
        "В’їзд до Києва 1648",
        "Зборівський договір 1649",
        "Берестецька битва 1651",
        "Білоцерківський договір 1651",
        "Батозька битва 1652",
        "Переяславська рада 1654",
        "Березневі статті 1654",
        "Іван Виговський",
        "Гадяцький трактат 1658",
        "Конотопська битва 1659",
        "Руїна",
        "Юрій Хмельницький",
        "Павло Тетеря",
        "Іван Брюховецький",
        "Петро Дорошенко",
        "Андрусівське перемир’я 1667",
        "Правобережна Україна",
        "Лівобережна Україна",
        "Іван Сірко",
        "Іван Мазепа",
        "Коломацькі статті 1687",
        "Союз зі Швецією",
        "Батуринська трагедія 1708",
        "Полтавська битва 1709",
        "Пилип Орлик",
        "Конституція Орлика 1710",
        "Малоросійська колегія",
        "Кирило Розумовський",
        "Ліквідація гетьманства 1764",
        "Зруйнування Січі 1775",
        "Чорноморське козацтво",
        "Переселення на Кубань",
        "Коліївщина 1768",
        "Гайдамаччина",
        "Уманська різанина",
        "Опришки",
        "Олекса Довбуш",
        "Поділи Речі Посполитої",
        "Кримське ханство",
        "Колонізація Півдня",
        "Катеринослав",
        "Херсон",
        "Одеса заснування 1794",
        "Миколаїв",
        "Енеїда 1798",
        "Кирило-Мефодіївське братство",
        "Тарас Шевченко",
        "Кобзар 1840",
        "Михайло Драгоманов",
        "Пантелеймон Куліш",
        "Іван Нечуй-Левицький",
        "Микола Лисенко",
        "Іван Франко",
        "Леся Українка",
        "Просвіта",
        "НТШ у Львові",
        "Валуєвський циркуляр 1863",
        "Емський указ 1876",
        "Руська трійця",
        "Русалка Дністровая",
        "Галичина",
        "Буковина",
        "Закарпаття",
        "Холмщина",
        "Підляшшя",
        "Українські січові стрільці",
        "Перша світова війна",
        "Листопадовий чин 1918",
        "ЗУНР",
        "Євген Петрушевич",
        "Українська Народна Республіка",
        "Центральна Рада",
        "Універсал Перший",
        "Універсал Другий",
        "Універсал Третій",
        "Універсал Четвертий",
        "Михайло Грушевський",
        "Володимир Винниченко",
        "Павло Скоропадський",
        "Українська Держава 1918",
        "Директорія УНР",
        "Симон Петлюра",
        "Нестор Махно",
        "Акт Злуки 1919",
        "Варшавський договір 1920",
        "Ризький мир 1921",
        "Українізація",
        "НЕП",
        "Індустріалізація",
        "Колективізація",
        "Розкуркулення",
        "Голодомор 1932–1933",
        "Розстріляне відродження",
        "Лесь Курбас",
        "Микола Хвильовий",
        "Микола Куліш",
        "Биківня",
        "Сандармох",
        "Карпатська Україна 1939",
        "Августин Волошин",
        "Пакт Молотова–Ріббентропа",
        "Приєднання Західної України",
        "Друга світова війна",
        "Оборона Києва 1941",
        "Бабин Яр",
        "Рейхскомісаріат Україна",
        "Партизанський рух",
        "УПА",
        "Роман Шухевич",
        "Степан Бандера",
        "Акція Вісла 1947",
        "УРСР в ООН",
        "Дисидентський рух",
        "Василь Стус",
        "Іван Світличний",
        "В’ячеслав Чорновіл",
        "Левко Лук’яненко",
        "Самвидав",
        "Чорнобильська катастрофа 1986",
        "Революція на граніті 1990",
        "Декларація суверенітету 1990",
        "Акт незалежності 1991",
        "Референдум 1 грудня 1991",
        "Державний прапор України",
        "Державний герб Тризуб",
        "Державний гімн України",
        "Конституція України 1996",
        "Запровадження гривні 1996",
        "Помаранчева революція 2004",
        "Євромайдан",
        "Революція Гідності",
        "Небесна Сотня",
        "Анексія Криму 2014",
        "Війна на Донбасі",
        "Іловайський котел",
        "Дебальцеве",
        "Мінські угоди",
        "Безвізовий режим 2017",
        "Томос ПЦУ 2019",
        "Повномасштабне вторгнення 2022",
        "Буча",
        "Ірпінь",
        "Маріуполь",
        "Азовсталь",
        "Деокупація Херсона",
        "Харківський контрнаступ",
        "Острів Зміїний",
        "Кримський міст вибух",
        "Ленд-ліз США 2022",
        "Bayraktar TB2",
        "HIMARS",
        "NASAMS",
        "IRIS-T",
        "Легендарний вислів про корабель",
        "Софія Київська спадщина ЮНЕСКО",
        "Києво-Печерська лавра",
        "Лаврські печери",
        "Успенський собор Києва",
        "Михайлівський Золотоверхий",
        "Андріївська церква",
        "Кам’янець-Подільська фортеця",
        "Хотинська фортеця",
        "Острозький замок",
        "Площа Ринок Львів",
        "Львівська ратуша",
        "Львівський оперний театр",
        "Пересопницьке Євангеліє",
        "Слово о полку Ігоревім",
        "Кобзарство",
        "Бандура",
        "Кобзарі",
        "Гордієнко Кость",
        "Петро Калнишевський",
        "Іван Самойлович",
        "Іван Скоропадський",
        "Данило Апостол",
        "Павло Полуботок",
        "Глухівська столиця",
        "Чигирин гетьманська столиця",
        "Біла Церква",
        "Переяслав",
        "Ніжин",
        "Чернігів",
        "Новгород-Сіверський",
        "Полтава",
        "Харків",
        "Катеринослав Дніпро",
        "Одеса порт",
        "Миколаїв кораблебудування",
        "Запоріжжя Дніпрогес",
        "Дніпрогес 1932",
        "Кривбас",
        "Донбас індустріалізація",
        "Карпатська Русь",
        "Гуцули",
        "Лемки",
        "Бойки",
        "Полісся",
        "Поділля",
        "Волинь",
        "Слобожанщина",
        "Таврія",
        "Буковина край",
        "Генуезькі фортеці Криму",
        "Бахчисарайський палац",
        "Кримськотатарський народ",
        "Депортація кримських татар 1944",
        "Повернення кримських татар",
        "Острозькі князі",
        "Костянтин Острозький",
        "Битва під Оршею 1514",
        "Брацлавське воєводство",
        "Київське воєводство",
        "Чернігівське воєводство",
        "Київський магістрат",
        "Козацькі полки",
        "Полковий устрій",
        "Січова старшина",
        "Кошовий отаман",
        "Гетьманщина",
        "Рада старшин",
        "Зоряна фортеця Кодак",
        "Кодакська фортеця",
        "Повстання Павлюка 1637",
        "Повстання Острянина 1638",
        "Деулінське перемир’я 1618",
        "Андрусівська лінія",
        "Вічний мир 1686",
        "Нова Січ",
        "Задунайська Січ",
        "Чорноморський флот",
        "Севастополь",
        "Оборона Севастополя 1854",
        "Кримська війна 1853–1856",
        "Скасування кріпацтва 1861",
        "Харківський університет 1804",
        "Київський університет 1834",
        "Львівський університет 1661",
        "Одеський університет 1865",
        "Залізниці в Україні",
        "Поштова реформа",
        "Промислова революція",
        "Кобзар 1860 видання",
        "Будинок з химерами",
        "Софійська площа",
        "Майдан Незалежності",
        "Пам’ятник Хмельницькому",
        "Акт проголошення незалежності",
        "Синьо-жовтий прапор",
        "Тризуб Володимира",
        "Гімн Ще не вмерла",
        "Українська мова закон 2019",
        "Декомунізація 2015",
        "Децентралізація",
        "Угода про асоціацію з ЄС",
        "Канада визнання Голодомору",
        "Польща визнання Голодомору",
        "Німеччина допомога Україні",
        "Польсько-українське примирення",
        "Кіборги ДАП",
        "Донецький аеропорт",
        "Савур-могила",
        "Звільнення Слов’янська",
        "Дебальцівський плацдарм",
        "Марш захисників",
        "Нагородження Героїв України",
        "Байрактар пісня",
        "Стійкість Києва 2022",
        "Оборона Чернігова 2022",
        "Суми спротив",
        "Волонтерський рух",
        "Пункти незламності",
        "Енергетичний терор",
        "Зернова угода",
        "Чорноморський коридор",
        "Ракетні удари по Києву",
        "Шахеди",
        "ППО Києва",
        "Патріот в Україні",
        "Леопарди в Україні",
        "Челлендж Рамштайн",
        "Країни Рамштайну",
        "Європейська інтеграція",
        "Кандидатство в ЄС 2022",
        "Здобуття безвізу",
        "Візит лідерів до Києва",
        "Британська підтримка",
        "Польська підтримка",
        "Балтійська підтримка",
        "Ленд-ліз для України",
        "Санкції проти агресора",
        "Ембарго на нафту",
        "Енергетична незалежність",
        "Газовий транзит",
        "Північний потік суперечка",
        "Помісна Православна Церква",
        "Митрополит Епіфаній",
        "Філарет Київський",
        "Андрей Шептицький",
        "Йосип Сліпий",
        "Українська Греко-Католицька Церква",
        "Свято-Покровська традиція",
        "Козацька чайка",
        "Литовсько-руська держава",
        "Руське воєводство",
        "Магнати Острозькі",
        "Київські літописи",
        "Галицько-Волинський літопис",
        "Межигірський Спас",
        "Переяславська угода оцінки",
        "Українське бароко",
        "Козацькі церкви",
        "Дерев’яні церкви Карпат",
        "Заповідник Софія Київська",
        "Лавра в списку ЮНЕСКО",
        "Давній Любеч",
        "Битва під Берестечком",
        "Битва під Зборовом",
        "Битва під Пилявцями",
        "Битва під Батогом",
        "Битва під Жванцем",
        "Битва під Конотопом",
        "Батурин гетьманська столиця",
        "Глухів гетьманська столиця",
        "Стара фортеця Тернопіль",
        "Замок Паланок Мукачево",
        "Хотин облога 1621",
        "Кам’яна Могила",
        "Збручанський ідол",
        "Скіфські кургани",
        "Курган Чортомлик",
        "Толоса скіфського золота",
        "Пектораль з Товстої Могили",
        "Ольвійська монета",
        "Античні міста Північного Причорномор’я",
        "Генуезька фортеця Судак",
        "Мангуп-Кале",
        "Ескі-Кермен",
        "Тустань скелі",
        "Хотинський замок",
        "Хортиця заповідник",
        "Січові ворота",
        "Козацькі клейноди",
        "Булава гетьмана",
        "Литаври січові",
        "Клейноди Війська Запорозького",
        "Полкові хоругви",
        "Лицарський хрест УПА",
        "Орден Богдана Хмельницького",
        "Орден Ярослава Мудрого",
        "Герой України",
        "Почесна відзнака ЗСУ",
        "ЗСУ",
        "Тероборона",
        "Добробати",
        "Кібероборона",
        "Волонтерська допомога",
        "Благодійні фонди",
        "Повернись живим фонд",
        "Армія дронів",
        "Банка Монобанку",
        "Єдність суспільства",
        "Гуманітарні коридори",
        "Евакуація Маріуполя",
        "Обмін полоненими",
        "Захисники Азову",
        "Патріотична символіка",
        "Вишиванка день",
        "День Незалежності",
        "День Конституції",
        "День Соборності",
        "День захисників України",
        "Крути 1918",
        "Бій під Крутами",
        "Українські січові стрільці Легіон",
        "Чортківська офензива",
        "Бої за Львів 1918",
        "Вільшаницька операція",
        "Переговори у Бресті",
        "Брест-Литовський мир 1918",
        "Заснування УАН 1918",
        "АН УРСР",
        "Київська школа математики",
        "Патон Інститут",
        "Мечников Нобелівська премія",
        "Корольов ракетобудування",
        "Південмаш Дніпро",
        "Ан-225 Мрія",
        "Антонов ДП",
        "Космонавт Леонов в Україні?",
        "Байконур участь українців",
        "Чорноморське суднобудування",
        "Київський метрополітен",
        "Метро Дніпро",
        "Львів електрифікація",
        "Річ Посполита поділи",
        "Австро-Угорщина Галичина",
        "Митрополит Андрей Шептицький",
        "Берестейська унія 1596",
        "Унійні церкви",
        "Кирилиця",
        "Українська абетка",
        "Латинка дискусія",
        "Кирило Розумовський палац",
        "Батурин палац",
        "Садиба Качанівка",
        "Софіївка Умань",
        "Олеський замок",
        "Золочівський замок",
        "Свіржський замок",
        "Підгорецький замок",
        "Меджибізька фортеця",
        "Луцький замок",
        "Замок Любарта",
        "Острів Хортиця заповідник",
        "Дніпровські пороги затоплення",
        "Каховське водосховище",
        "Каховська ГЕС",
        "Північнокримський канал",
        "Будівництво Дніпрогесу",
        "Індустріальні гіганти Донбасу",
        "Криворізький Залізорудний басейн",
        "Нікопольський марганець",
        "Запорізький титан",
        "Харківський тракторний завод",
        "АЗЛК? (не Україна)",
        "Південний машинобудівний",
        "Літак Ан-225",
        "Київський щит",
        "Операція Фортечний Київ",
        "План Дніпро",
        "Євро-2012 в Україні",
        "НСК Олімпійський реконструкція",
        "Арена Львів",
        "Харків Металіст стадіон",
        "Дніпро Арена",
        "Угода про асоціацію підписання",
        "Ратифікація угоди з ЄС",
        "Курс на НАТО",
        "Стаття про ЄС в Конституції",
        "Антикорупційні інституції",
        "НАБУ",
        "ВАКС",
        "НАЗК",
        "Е-декларування",
        "Дія цифрова держава",
        "Електронний перепис",
        "Відбудова України",
        "План Маршалла для України",
        "Саміт Україна–ЄС",
        "Саміт Кримської платформи",
        "Кримська платформа",
        "Гуманітарна допомога світу",
        "Реформи децентралізації",
        "Об’єднані громади",
        "Адміністративно-територіальна реформа",
        "Нові райони 2020",
        "Вибори місцеві 2020",
        "Курс на відновлення",
        "Енергетична співпраця з ЄС",
        "Синхронізація з ENTSO-E",
        "Європейська електромережа",
        "Від’єднання від енергосистеми РФ",
        "Відновлювана енергетика",
        "Сонячні станції",
        "Вітрові станції",
        "Біоенергетика",
        "Зерновий коридор",
        "Експорт зерна",
        "Світова продовольча безпека",
        "План відбудови Луганщини",
        "План відбудови Донеччини",
        "План відбудови Херсонщини",
        "План відбудови Миколаївщини",
        "Відновлення мостів",
        "Демінування",
        "Піротехніки ДСНС",
        "Пес Патрон",
        "Наукові відкриття українців",
        "IT-індустрія України",
        "Українська діаспора",
        "Канада українці",
        "США українці",
        "Польща українці",
        "Німеччина українці",
        "Голодомор визнання світом",
        "Меморіал Голодомору Київ",
        "Музей Революції Гідності",
        "Музей історії України",
        "Національний заповідник Київ Печерська лавра",
        "Національний історичний музей",
        "Національний художній музей",
        "Музей Івана Гончара",
        "Музей Шевченка Канів",
        "Чернеча гора",
        "Садиба Франка Нагуєвичі",
        "Літературні читання Шевченка",
        "Фестиваль Червона Рута",
        "Фестиваль Країна мрій",
        "Форум видавців у Львові",
        "Книжковий Арсенал",
        "Премія Шевченка",
        "Премія Ярослава Мудрого",
        "Українська школа в модернізмі",
        "Михайло Бойчук",
        "Київський авангард",
        "Київська школа економіки",
        "Українські миротворці",
        "Участь в ООН",
        "Прапор на Говерлі 1990",
        "Говерла",
        "Карпати",
        "Чорне море",
        "Азовське море",
        "Дніпро",
        "Дністер",
        "Південний Буг",
        "Сіверський Донець",
        "Прип’ять",
        "Десна",
        "Пантеон українських героїв",
        "Нагороди держави",
        "Відзнаки волонтерів",
        "Підтримка союзників",
        "Реконструкція інфраструктури"
    ],
    music: [
        "Океан Ельзи",
        "Воплі Відоплясова",
        "Скрябін",
        "Бумбокс",
        "Без Обмежень",
        "The Hardkiss",
        "KAZKA",
        "Go_A",
        "Kalush Orchestra",
        "Jamala",
        "Руслана",
        "Тіна Кароль",
        "MONATIK",
        "DZIDZIO",
        "Потап і Настя",
        "Время і Стекло",
        "alyona alyona",
        "Jerry Heil",
        "ONUKA",
        "DakhaBrakha",
        "Pianoboy",
        "Kozak System",
        "ТНМК",
        "Тартак",
        "Брати Гадюкіни",
        "Один в каное",
        "Антитіла",
        "O.Torvald",
        "Ярмак",
        "Артем Пивоваров",
        "Max Barskih",
        "NK",
        "Верка Сердючка",
        "Ірина Білик",
        "Софія Ротару",
        "Назарій Яремчук",
        "Василь Зінкевич",
        "Квітка Цісик",
        "Друга Ріка",
        "С.К.А.Й.",
        "Мотор’ролла",
        "Фіолет",
        "Мандри",
        "Гайдамаки",
        "Кому Вниз",
        "Жадан і Собаки",
        "Олександр Пономарьов",
        "TARABAROVA",
        "Dorofeeva",
        "Wellboy",
        "KOLA",
        "MamaRika",
        "Арсен Мірзоян",
        "Сергій Бабкін",
        "5'nizza",
        "Христина Соловій",
        "MELOVIN",
        "Віталій Козловський",
        "Катерина Бужинська",
        "ТІК",
        "Ivan NAVI",
        "Epolets",
        "LATEXFAUNA",
        "Brunettes Shoot Blondes",
        "SunSay",
        "Zlata Огневич",
        "KRUTЬ",
        "KADNAY",
        "YUKO",
        "Оля Полякова",
        "MARUV",
        "Піккардійська Терція",
        "Плач Єремії",
        "Мертвий Півень",
        "Вій",
        "Mad Heads XL",
        "Green Grey",
        "Пара Нормальних",
        "Сашко Положинський",
        "Юлія Саніна",
        "Андрій Хливнюк",
        "Святослав Вакарчук",
        "Dakh Daughters",
        "Skofka",
        "YAKTAK",
        "Artbat",
        "Cape Cod",
        "Morphom",
        "The Erised",
        "Обійми",
        "Я не здамся без бою",
        "Вставай",
        "Без бою",
        "Все буде добре",
        "На небі",
        "Там, де нас нема",
        "Весна",
        "Танці",
        "Червона рута",
        "Водограй",
        "Я піду в далекі гори",
        "Два кольори",
        "Пісня про рушник",
        "Ніч яка місячна",
        "Несе Галя воду",
        "Їхав козак за Дунай",
        "Ой у лузі червона калина",
        "Щедрик",
        "Розпрягайте, хлопці, коні",
        "Ой, на горі та й женці жнуть",
        "Гей, соколи",
        "Ой, смереко",
        "Дикі танці",
        "1944",
        "Шум",
        "Стефанія",
        "Плакала",
        "Вахтерам",
        "Квіти в волоссі",
        "Такий молодий",
        "Наодинці",
        "Журавлі",
        "Коханці",
        "Маяк",
        "Планета",
        "Свята",
        "Цілувати тебе",
        "Соловей",
        "Крила",
        "Dancing Lasha Tumbai",
        "Королева ночі",
        "Чумачечая весна",
        "Имя 505",
        "Навернопотомучто",
        "Кружит",
        "Vitamin D",
        "Love It Rhythm",
        "Вільна каса",
        "Мрія",
        "Мамин суп",
        "Рибки",
        "Пушка",
        "У мене немає дому",
        "Човен",
        "Зорі запалали",
        "Листопад",
        "Без неї ніяк",
        "Кохання",
        "Родина",
        "Шампанські очі",
        "Вірила",
        "TDME",
        "Лови момент",
        "Сонце",
        "Дежавю",
        "Океан",
        "Рандом",
        "Твої очі",
        "Гуси",
        "Вишні",
        "Ше",
        "Додому",
        "Зоряна",
        "Чути гімн",
        "Погляди",
        "Нова радість стала",
        "Добрий вечір тобі",
        "Бог предвічний",
        "Небо і земля",
        "Во Вифлеємі",
        "Ой хто-хто Миколая любить",
        "Зеленеє жито",
        "Гуцулка Ксеня",
        "Ой, у вишневому саду",
        "Ти ж мене підманула",
        "Верховино, світку ти наш",
        "Місця щасливих людей",
        "Люди як кораблі",
        "Старі фотографії",
        "Мам",
        "Кінець фільму",
        "Спи собі сама",
        "Мовчати",
        "9-й номер",
        "Хочу з тобою",
        "Грай",
        "7:20 am",
        "Злива",
        "Понад хмарами",
        "Легковажна",
        "Моя мала",
        "Три хвилини",
        "Такої як ти",
        "Все буде так, як ти хочеш",
        "На лінії вогню",
        "Терпи",
        "Фарби",
        "Не йди",
        "Поліна",
        "Бета каротин",
        "Сухий дуб",
        "Мальви",
        "Гей наливайте повнії чари",
        "Два дубки",
        "Ой, летіли дикі гуси",
        "Червона калина саду",
        "Чорнобривці",
        "Козацькому роду нема переводу",
        "Ой, три дороги",
        "Гопак",
        "Карнавал",
        "Ще не було біди",
        "Бережи мене",
        "Стріляй",
        "Вільні люди",
        "Заспіваймо пісню",
        "Ой на Івана, ой на Купала",
        "Ой, Марічко, чичері",
        "Червона маки",
        "Гей, нумо, хлопці",
        "Одна кров",
        "Серце",
        "Антарктида",
        "Слава Україні",
        "Державний гімн України",
        "Добре з тобою",
        "Fortepiano",
        "На світанку",
        "Vidlik",
        "Шо з-под дуба",
        "Vesnyanky",
        "Святвечір",
        "Синє небо, жовте поле",
        "Наші люди",
        "Брат за брата",
        "Незалежність",
        "Україна",
        "Олені",
        "Ми люди",
        "Тіні забутих предків",
        "Стожари",
        "Світанок",
        "Дорога додому",
        "Янголи",
        "Фотографії",
        "Time",
        "Колискова",
        "Моя країна",
        "Небо",
        "Марш нової армії",
        "Розкажи",
        "Приручай",
        "Elefante",
        "Тумани",
        "Сделай громче",
        "Дольче Габбана",
        "Горіла сосна",
        "Їхав козак містом",
        "Стоїть гора високая",
        "Повій, вітре, на Вкраїну",
        "Ой, роде наш красний",
        "Чорна рілля ізорана",
        "Ой, чиє ж то жито",
        "Марш запорозького війська",
        "Гей ви, хлопці",
        "Ой, літа орел",
        "Ой, дубе, дубе",
        "Ой, чий то кінь стоїть",
        "Ой, ходить сон коло вікон",
        "Ой, люлі, люлі",
        "Та косив батько, косив я",
        "Ой, у полі криниченька",
        "Ой, не світи місяцю",
        "Ой, доля людська",
        "Та весна красна",
        "Ой, біжить бистра річка",
        "Ой, карії очі",
        "Червона ружа",
        "Ніжно",
        "Скандал",
        "Полюби мене",
        "Свято",
        "Жива",
        "Очі",
        "Моя любов",
        "Вовк",
        "Калинова сопілка",
        "Коломийка"
    ],
    realities: [
        "Маршрутка",
        "Передайте за проїзд",
        "Зайчик без квитка",
        "Тролейбус",
        "Трамвай",
        "Метро",
        "Електричка",
        "Інтерсіті",
        "Укрзалізниця",
        "Купе",
        "Плацкарт",
        "Нижня полиця",
        "Верхня полиця",
        "Постіль у поїзді",
        "Провідник",
        "Розклад поїздів",
        "Е-квиток",
        "Валідатор",
        "Турнікет",
        "Кондуктор",
        "Контролер",
        "Київ Digital",
        "Kyiv Smart Card",
        "Безконтактна оплата",
        "Готівка за проїзд",
        "Остання зупинка",
        "Кінцева зупинка",
        "Притримайте двері",
        "Задні двері",
        "Дзвінок зупинки",
        "Рейсове таксі",
        "Обмеження швидкості",
        "Паркування",
        "Камери автофіксації",
        "Лежачий поліцейський",
        "Нова пошта",
        "Поштомат",
        "ТТН",
        "Кур’єр",
        "Відстеження посилки",
        "Оголошена вартість",
        "Накладений платіж",
        "Відділення",
        "Укрпошта",
        "Посилка з Rozetka",
        "Упаковка на відділенні",
        "Повернення товару",
        "Стрічка для пакування",
        "Номер посилки",
        "Експрес-доставка",
        "Приват24",
        "Монобанк",
        "Дія",
        "єДокумент",
        "Дія.Підпис",
        "Apple Pay",
        "Google Pay",
        "QR-платіж",
        "Термінал",
        "Касовий чек",
        "Кешбек",
        "Переказ на картку",
        "IBAN",
        "Комуналка",
        "Субсидія",
        "Лічильник світла",
        "Показники лічильника",
        "Абонплата",
        "ОСББ",
        "ЖЕК",
        "Домофон",
        "Код від під’їзду",
        "Ліфт",
        "Ремонт у під’їзді",
        "Сміттєпровід",
        "Київстар",
        "Vodafone",
        "lifecell",
        "eSIM",
        "Поповнення рахунку",
        "Тарифи",
        "Гігабайти",
        "VoLTE",
        "4G",
        "5G",
        "Wi‑Fi в метро",
        "Мобільний інтернет",
        "Роутер",
        "Оптика в квартиру",
        "Speedtest",
        "Кав’ярня",
        "Кава з собою",
        "Капучино",
        "Лате",
        "Американо",
        "Флет-вайт",
        "Пуровер",
        "Кемекс",
        "Аеропрес",
        "Альтернативна кава",
        "Круасан",
        "Сирник",
        "Київський торт",
        "Вареники",
        "Борщ",
        "Деруни",
        "Голубці",
        "Сільпо",
        "АТБ",
        "Новус",
        "Ашан",
        "Фора",
        "Варус",
        "METRO Cash&Carry",
        "Епіцентр",
        "Rozetka",
        "OLX",
        "Comfy",
        "Фокстрот",
        "Цитрус",
        "ЦНАП",
        "ID‑картка",
        "Закордонний паспорт",
        "Біометричний паспорт",
        "Реєстрація місця проживання",
        "Довідка про несудимість",
        "Електронний підпис",
        "Кадастровий номер",
        "Нотаріус",
        "Іпотека",
        "ЗНО",
        "НМТ",
        "Стипендія",
        "Сесія",
        "Залік",
        "Деканат",
        "Гуртожиток",
        "Студентський квиток",
        "Дистанційне навчання",
        "Електронний щоденник",
        "Повітряна тривога",
        "Сирена",
        "Тривожна валіза",
        "Укриття",
        "Бомбосховище",
        "Пункт незламності",
        "Блекаут",
        "Генератор",
        "Powerbank",
        "Світломаскування",
        "Свічки",
        "Starlink",
        "Графік відключень",
        "Обігрівач",
        "Пічка‑буржуйка",
        "Донат",
        "Банка Монобанку",
        "Волонтер",
        "Гуманітарка",
        "Термобілизна",
        "Маршрутка під зав’язку",
        "Стоячи в салоні",
        "Черга",
        "Талончик",
        "Номерок",
        "Електронна черга",
        "Каса самообслуговування",
        "Картка лояльності",
        "Бонуси в додатку",
        "Акція 1+1",
        "Екоторбинка",
        "Роздільний збір сміття",
        "Мурал на будинку",
        "Велодоріжка",
        "Візок у супермаркеті",
        "Пакет на касі",
        "Кавова культура",
        "Коворкінг",
        "Віддаленка",
        "Телеграм‑канал району",
        "Оголошення в під’їзді",
        "Торгово‑розважальний центр",
        "Фудкорт",
        "Multiplex",
        "Планета Кіно",
        "IMAX",
        "Попкорн",
        "Квест‑кімната",
        "Батутний парк",
        "Uber",
        "Bolt",
        "Uklon",
        "Електросамокат",
        "Велопрокат",
        "Шиномонтаж",
        "Автоцивілка",
        "КАСКО",
        "АЗС",
        "А95",
        "Дизель",
        "Газ на авто",
        "Work.ua",
        "Djinni",
        "LinkedIn",
        "ФОП",
        "Група 3",
        "ЄП єдиний податок",
        "ЄСВ",
        "КЕП",
        "Карта тривог",
        "Пункт видачі гуманітарки",
        "Пункт обігріву",
        "Світло є?",
        "Сусіди в чаті ОСББ"
    ]
};

class AliasGame {
    constructor() {
        this.teams = [];
        this.currentTeamIndex = 0;
        this.currentRound = 1;
        this.selectedThemes = [];
        this.roundTime = 60;
        this.timer = null;
        this.timeLeft = 60;
        this.currentWords = [];
        this.currentWordIndex = 0;
        this.scores = {};
        this.gameStarted = false;
        this.currentPlayer = null;
        this.totalRounds = 3;
        this.currentPlayerIndex = {}; // Індекс поточного учасника для кожної команди
        this.isLastWord = false; // Чи зараз пояснюється останнє слово без таймера
        
        this.init();
    }

    init() {
        this.setupEventListeners();
        this.addDefaultTeam();
    }

    setupEventListeners() {
        // Кнопки налаштування
        document.getElementById('addTeamBtn').addEventListener('click', () => this.addTeam());
        document.getElementById('startGameBtn').addEventListener('click', () => this.startGame());
        
        // Кнопки гри
        document.getElementById('correctBtn').addEventListener('click', () => this.handleCorrect());
        document.getElementById('wrongBtn').addEventListener('click', () => this.handleWrong());
        
        // Кнопка початку раунду
        document.getElementById('startRoundBtn').addEventListener('click', () => this.startRoundGameplay());
        
        // Кнопки результатів
        document.getElementById('newRoundBtn').addEventListener('click', () => this.startNewRound());
        document.getElementById('newGameBtn').addEventListener('click', () => this.resetGame());
        
        // Вибір тематик
        document.querySelectorAll('.theme-option input').forEach(checkbox => {
            checkbox.addEventListener('change', (e) => {
                if (e.target.checked) {
                    if (!this.selectedThemes.includes(e.target.value)) {
                        this.selectedThemes.push(e.target.value);
                    }
                } else {
                    this.selectedThemes = this.selectedThemes.filter(t => t !== e.target.value);
                }
            });
        });

        // Seed initially checked themes on load
        const initiallyChecked = document.querySelectorAll('.theme-option input:checked');
        this.selectedThemes = Array.from(initiallyChecked).map(cb => cb.value);
    }

    addDefaultTeam() {
        this.addTeam();
    }

    addTeam() {
        const teamId = Date.now();
        const team = {
            id: teamId,
            name: `Команда ${this.teams.length + 1}`,
            members: [],
            score: 0
        };
        
        this.teams.push(team);
        this.scores[teamId] = 0;
        this.renderTeams();
    }

    removeTeam(teamId) {
        if (this.teams.length <= 1) {
            alert('Повинна бути принаймні одна команда!');
            return;
        }
        
        this.teams = this.teams.filter(t => t.id !== teamId);
        delete this.scores[teamId];
        this.renderTeams();
    }

    addMemberToTeam(teamId, memberName) {
        if (!memberName.trim()) return;
        
        const team = this.teams.find(t => t.id === teamId);
        if (team && !team.members.includes(memberName.trim())) {
            team.members.push(memberName.trim());
            this.renderTeams();
        }
    }

    removeMemberFromTeam(teamId, memberName) {
        const team = this.teams.find(t => t.id === teamId);
        if (team) {
            team.members = team.members.filter(m => m !== memberName);
            this.renderTeams();
        }
    }

    updateTeamName(teamId, newName) {
        const team = this.teams.find(t => t.id === teamId);
        if (team) {
            team.name = newName;
        }
    }

    renderTeams() {
        const container = document.getElementById('teamsContainer');
        container.innerHTML = '';

        this.teams.forEach(team => {
            const teamDiv = document.createElement('div');
            teamDiv.className = 'team';
            teamDiv.innerHTML = `
                <div class="team-header">
                    <input type="text" class="team-name-input" value="${team.name}" 
                           data-team-id="${team.id}">
                    ${this.teams.length > 1 ? `<button class="btn btn-remove" data-team-id="${team.id}">Видалити</button>` : ''}
                </div>
                <div class="team-members" id="members-${team.id}">
                    ${team.members.map(member => `
                        <div class="member-tag">
                            <span>${member}</span>
                            <button data-team-id="${team.id}" data-member-name="${member.replace(/"/g, '&quot;')}">×</button>
                        </div>
                    `).join('')}
                </div>
                <div class="member-input-group">
                    <input type="text" class="member-input" id="member-input-${team.id}" 
                           placeholder="Додати учасника..." 
                           data-team-id="${team.id}">
                    <button class="btn btn-secondary" data-team-id="${team.id}">Додати</button>
                </div>
            `;
            container.appendChild(teamDiv);
        });

        // Додаємо обробники подій після рендерингу
        this.teams.forEach(team => {
            // Обробник для зміни назви команди
            const teamNameInput = container.querySelector(`input[data-team-id="${team.id}"].team-name-input`);
            if (teamNameInput) {
                teamNameInput.addEventListener('change', (e) => {
                    this.updateTeamName(team.id, e.target.value);
                });
            }

            // Обробник для кнопки видалення команди
            const removeTeamBtn = container.querySelector(`button.btn-remove[data-team-id="${team.id}"]`);
            if (removeTeamBtn) {
                removeTeamBtn.addEventListener('click', () => {
                    this.removeTeam(team.id);
                });
            }

            // Обробник для видалення учасника
            const removeMemberBtns = container.querySelectorAll(`button[data-team-id="${team.id}"][data-member-name]`);
            removeMemberBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const memberName = btn.getAttribute('data-member-name');
                    this.removeMemberFromTeam(team.id, memberName);
                });
            });

            // Обробник для інпуту нового учасника
            const memberInput = document.getElementById(`member-input-${team.id}`);
            if (memberInput) {
                memberInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        const memberName = memberInput.value.trim();
                        if (memberName) {
                            this.addMemberToTeam(team.id, memberName);
                            memberInput.value = '';
                        }
                    }
                });
            }

            // Обробник для кнопки додавання учасника
            const addMemberBtn = container.querySelector(`button.btn-secondary[data-team-id="${team.id}"]`);
            if (addMemberBtn) {
                addMemberBtn.addEventListener('click', () => {
                    const memberInput = document.getElementById(`member-input-${team.id}`);
                    if (memberInput) {
                        const memberName = memberInput.value.trim();
                        if (memberName) {
                            this.addMemberToTeam(team.id, memberName);
                            memberInput.value = '';
                        }
                    }
                });
            }
        });
    }

    startGame() {
        // Валідація
        if (this.selectedThemes.length === 0) {
            alert('Виберіть принаймні одну тематику!');
            return;
        }

        if (this.teams.length === 0) {
            alert('Додайте принаймні одну команду!');
            return;
        }

        if (this.teams.some(t => t.members.length === 0)) {
            alert('Кожна команда повинна мати принаймні одного учасника!');
            return;
        }

        this.roundTime = parseInt(document.getElementById('roundTime').value) || 60;
        this.totalRounds = parseInt(document.getElementById('totalRounds').value) || 3;
        this.gameStarted = true;
        this.currentTeamIndex = 0;
        this.currentRound = 1;
        
        // Ініціалізуємо індекси учасників для кожної команди
        this.currentPlayerIndex = {};
        this.teams.forEach(team => {
            this.currentPlayerIndex[team.id] = 0;
            this.scores[team.id] = 0;
            team.score = 0;
        });

        this.showRoundStartScreen();
    }

    showRoundStartScreen() {
        const currentTeam = this.teams[this.currentTeamIndex];
        
        // Визначаємо поточного учасника за індексом
        if (currentTeam.members.length > 0) {
            const playerIndex = this.currentPlayerIndex[currentTeam.id] || 0;
            this.currentPlayer = currentTeam.members[playerIndex];
        } else {
            this.currentPlayer = 'Учасник';
        }
        
        // Показуємо інформацію про раунд
        document.getElementById('roundStartTeamName').textContent = currentTeam.name;
        document.getElementById('roundStartPlayerName').textContent = this.currentPlayer;
        document.getElementById('roundStartRoundNumber').textContent = this.currentRound;
        
        // Показуємо поточний рахунок
        const scoresDisplay = document.getElementById('roundStartScoresDisplay');
        scoresDisplay.innerHTML = this.teams.map(team => {
            const isCurrentTeam = team.id === currentTeam.id;
            return `
                <div class="round-start-score-item ${isCurrentTeam ? 'active' : ''}">
                    <div class="round-start-score-team-name">${team.name}</div>
                    <div class="round-start-score-value">${this.scores[team.id] || 0}</div>
                </div>
            `;
        }).join('');
        
        this.showScreen('roundStartScreen');
    }

    startRoundGameplay() {
        this.showScreen('gameScreen');
        this.startRound();
    }

    startRound() {
        this.currentWordIndex = 0;
        this.isLastWord = false;
        this.generateWords();
        this.showCurrentWord();
        this.updateScores();
        this.updateRoundInfo();
        this.startTimer();
    }

    generateWords() {
        const allWords = [];
        this.selectedThemes.forEach(theme => {
            if (wordDatabase[theme]) {
                allWords.push(...wordDatabase[theme]);
            }
        });

        // Перемішуємо слова
        this.currentWords = this.shuffleArray([...allWords]);
    }

    shuffleArray(array) {
        const shuffled = [...array];
        for (let i = shuffled.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
        }
        return shuffled;
    }

    showCurrentWord() {
        const currentTeam = this.teams[this.currentTeamIndex];
        document.getElementById('currentTeamDisplay').textContent = currentTeam.name;
        document.getElementById('currentTeamName').textContent = `Зараз: ${currentTeam.name}`;
        document.getElementById('currentPlayerDisplay').textContent = this.currentPlayer || 'Учасник';
        
        // Перевіряємо чи є слова і чи не вийшли за межі масиву
        if (!this.currentWords || this.currentWords.length === 0) {
            this.generateWords();
        }
        
        if (this.currentWordIndex < this.currentWords.length) {
            document.getElementById('currentWord').textContent = this.currentWords[this.currentWordIndex];
        } else {
            // Закінчилися слова, генеруємо нові
            this.generateWords();
            this.currentWordIndex = 0;
            if (this.currentWords.length > 0) {
                document.getElementById('currentWord').textContent = this.currentWords[this.currentWordIndex];
            }
        }
    }

    updateRoundInfo() {
        document.getElementById('roundNumber').textContent = this.currentRound;
    }

    startTimer() {
        this.timeLeft = this.roundTime;
        this.isLastWord = false;
        this.updateTimerDisplay();

        if (this.timer) {
            clearInterval(this.timer);
        }

        this.timer = setInterval(() => {
            this.timeLeft--;
            this.updateTimerDisplay();

            if (this.timeLeft <= 0) {
                this.onTimeUp();
            }
        }, 1000);
    }

    onTimeUp() {
        clearInterval(this.timer);
        this.isLastWord = true;
        this.updateTimerDisplay();
    }

    updateTimerDisplay() {
        const timerElement = document.getElementById('timer');
        
        if (this.isLastWord) {
            timerElement.textContent = 'Останнє слово';
            timerElement.classList.remove('warning', 'danger');
            timerElement.classList.add('last-word');
        } else {
            timerElement.textContent = this.timeLeft;
            timerElement.classList.remove('warning', 'danger', 'last-word');
            if (this.timeLeft <= 10) {
                timerElement.classList.add('danger');
            } else if (this.timeLeft <= 20) {
                timerElement.classList.add('warning');
            }
        }
    }

    handleCorrect() {
        const currentTeam = this.teams[this.currentTeamIndex];
        this.scores[currentTeam.id]++;
        currentTeam.score++;
        
        if (this.isLastWord) {
            // Якщо це останнє слово, завершуємо раунд
            this.endRound();
        } else {
            // Інакше переходимо до наступного слова
            this.nextWord();
        }
        this.updateScores();
    }

    handleWrong() {
        const currentTeam = this.teams[this.currentTeamIndex];
        if (this.scores[currentTeam.id] > 0) {
            this.scores[currentTeam.id]--;
            currentTeam.score--;
        }
        
        if (this.isLastWord) {
            // Якщо це останнє слово, завершуємо раунд
            this.endRound();
        } else {
            // Інакше переходимо до наступного слова
            this.nextWord();
        }
        this.updateScores();
    }

    nextWord() {
        this.currentWordIndex++;
        this.showCurrentWord();
    }

    updateScores() {
        const scoresDisplay = document.getElementById('scoresDisplay');
        scoresDisplay.innerHTML = this.teams.map(team => {
            const isCurrentTeam = team.id === this.teams[this.currentTeamIndex].id;
            return `
                <div class="score-item ${isCurrentTeam ? 'active' : ''}">
                    <div class="score-team-name">${team.name}</div>
                    <div class="score-value">${this.scores[team.id] || 0}</div>
                </div>
            `;
        }).join('');
    }

    endRound() {
        // Зупиняємо таймер якщо він ще працює
        if (this.timer) {
            clearInterval(this.timer);
        }
        
        const currentTeam = this.teams[this.currentTeamIndex];
        const teamId = currentTeam.id;
        
        // Переходимо до наступного учасника в поточній команді
        this.currentPlayerIndex[teamId] = (this.currentPlayerIndex[teamId] || 0) + 1;
        
        // Перевіряємо чи всі учасники поточної команди вже пояснили
        if (this.currentPlayerIndex[teamId] >= currentTeam.members.length) {
            // Всі учасники команди пояснили, переходимо до наступної команди
            this.currentPlayerIndex[teamId] = 0; // Скидаємо для наступного раунду
            this.currentTeamIndex++;
            
            if (this.currentTeamIndex < this.teams.length) {
                // Є ще команди в цьому раунді
                setTimeout(() => {
                    this.showRoundStartScreen();
                }, 1000);
            } else {
                // Всі команди пройшли всіх своїх учасників - раунд закінчився
                this.currentRound++;
                this.currentTeamIndex = 0;
                
                // Скидаємо індекси учасників для нового раунду
                this.teams.forEach(team => {
                    this.currentPlayerIndex[team.id] = 0;
                });
                
                // Перевіряємо чи закінчилася вся гра
                if (this.currentRound > this.totalRounds) {
                    this.showResults();
                } else {
                    setTimeout(() => {
                        this.showRoundStartScreen();
                    }, 2000);
                }
            }
        } else {
            // Є ще учасники в поточній команді
            setTimeout(() => {
                this.showRoundStartScreen();
            }, 1000);
        }
    }

    startNewRound() {
        this.currentTeamIndex = 0;
        this.currentRound = 1;
        
        // Скидаємо індекси учасників та рахунки
        this.teams.forEach(team => {
            this.currentPlayerIndex[team.id] = 0;
            this.scores[team.id] = 0;
            team.score = 0;
        });
        
        this.showRoundStartScreen();
    }

    showResults() {
        this.showScreen('resultsScreen');
        
        const finalScores = document.getElementById('finalScores');
        const sortedTeams = [...this.teams].sort((a, b) => (this.scores[b.id] || 0) - (this.scores[a.id] || 0));
        
        finalScores.innerHTML = sortedTeams.map((team, index) => `
            <div class="final-score-item ${index === 0 ? 'winner' : ''}">
                <div>
                    ${index === 0 ? '🏆 ' : ''}${team.name}
                    ${team.members.length > 0 ? `(${team.members.join(', ')})` : ''}
                </div>
                <div>${this.scores[team.id] || 0} балів</div>
            </div>
        `).join('');
    }

    resetGame() {
        this.gameStarted = false;
        this.currentTeamIndex = 0;
        this.currentRound = 1;
        this.timeLeft = this.roundTime;
        
        if (this.timer) {
            clearInterval(this.timer);
        }
        
        // Скидаємо індекси учасників та рахунки
        this.currentPlayerIndex = {};
        this.teams.forEach(team => {
            this.currentPlayerIndex[team.id] = 0;
            team.score = 0;
            this.scores[team.id] = 0;
        });
        
        this.showScreen('setupScreen');
    }

    showScreen(screenId) {
        document.querySelectorAll('.screen').forEach(screen => {
            screen.classList.remove('active');
        });
        document.getElementById(screenId).classList.add('active');
    }
}

// Ініціалізація гри
let game;
window.addEventListener('DOMContentLoaded', () => {
    game = new AliasGame();
});

